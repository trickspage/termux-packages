diff '--color=auto' -uNr terminal-0.7/qmltermwidget/lib/kpty.cpp terminal-0.7.mod/qmltermwidget/lib/kpty.cpp
--- terminal-0.7/qmltermwidget/lib/kpty.cpp     2021-12-27 23:23:04.000000000 +0530
+++ terminal-0.7.mod/qmltermwidget/lib/kpty.cpp 2022-11-30 07:22:27.873679433 +0530
@@ -32,6 +32,10 @@
 #define HAVE_LIBUTIL_H
 #endif

+#if defined(__ANDROID__)
+#define HAVE_PTY_H
+#endif
+
 #if defined(__OpenBSD__)
 #define HAVE_LOGIN
 #define HAVE_UTIL_H
@@ -578,10 +582,12 @@
 #   endif
 #  else
     utmpname(_PATH_UTMP);
+#ifndef __ANDROID__
     setutent();
     pututline(&l_struct);
     endutent();
     updwtmp(_PATH_WTMP, &l_struct);
+#endif
 #  endif
 # endif
 #endif
@@ -631,7 +637,11 @@
 #  else
     utmpname(_PATH_UTMP);
     setutent();
+#ifndef __ANDROID__
     if ((ut = getutline(&l_struct))) {
+#else
+    if ((ut = getutent())) {
+#endif
 #  endif
 #  ifdef HAVE_UTMPX
         memset(ut->ut_user, 0, sizeof(*ut->ut_user));
@@ -652,7 +662,9 @@
     endutxent();
 #  else
     ut->ut_time = time(0);
+#ifndef __ANDROID__
     pututline(ut);
+#endif
 }
 endutent();
 #  endif
